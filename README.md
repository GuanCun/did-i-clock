# Tap Confirm - 打卡确认工具

> 弹性工时的智能打卡助手，自动计算下班时间，解决"几点能下班"的焦虑。

---

## 这是什么

一个**移动优先的 PWA 打卡应用**，为弹性工时（08:00-09:00 上班）设计：

- 📱 **单屏操作**：上班打卡 → 自动倒计时 → 提醒下班
- 🔒 **每日唯一**：上下班各只能打卡一次，避免误触
- 🧠 **智能修正**：忘记打卡也能正确计算下班时间
- 💾 **本地存储**：无需注册、无云同步、数据私有

---

## 解决什么痛点

| 痛点 | 解决方案 |
|-----|---------|
| 😰 每天手动算下班时间 | ✅ 自动计算 + 实时倒计时 |
| 😱 下午补打卡推算到凌晨下班 | ✅ 按 09:00 基准智能修正 |
| 😓 经常忘记下班打卡 | ✅ 提前 5/10/15 分钟提醒 |
| 😤 打卡记录混乱重复 | ✅ 每日唯一 + 状态可视化 |

---

## 界面预览

### 主界面（单屏）

```
┌─────────────────────────┐
│          15:01     [⚙️]  │  ← 当前时间 + 设置入口
│                         │
│ ⏱️ 距离下班还有 2:15:32  │  ← 实时倒计时
│                         │
│ ┌─────────────────────┐ │
│ │ ⚠️ 已上班打卡（迟到） │ │  ← 上班按钮（橙色）
│ └─────────────────────┘ │
│ ┌─────────────────────┐ │
│ │     下班打卡        │ │  ← 下班按钮
│ │  🔒 18:00 后可用    │ │
│ └─────────────────────┘ │
│                         │
│ 最近记录                │
│ ─────────────────────── │
│ 今天  上班  10:32 ⚠️ 迟到│  ← 带状态标记
│ 昨天  下班  18:01       │
│ 昨天  上班  08:32       │
└─────────────────────────┘
```

### 设置界面

```
┌─────────────────────────┐
│ 设置              [✕]   │
│                         │
│ 下班提醒时间            │
│ [5分] [10分] [15分]    │  ← 单选
│                         │
│ 工作时长                │
│ [9] 小时                │  ← 可调整
│                         │
│ ⚡ 提前下班模式  [OFF]   │  ← 节假日使用
└─────────────────────────┘
```

---

## 核心功能

### 1. 智能打卡状态

| 打卡时间 | 状态 | 下班时间计算 | 视觉标识 |
|---------|------|-------------|---------|
| 08:00 - 09:00 | 正常 | 实际时间 + 9h | ✓ 绿色 |
| 09:01 - 12:00 | 迟到 | **09:00 + 9h** | ⚠️ 橙色 |
| 12:01+ | 异常 | **09:00 + 9h** | 🔴 红色 |

**示例：**
- 8:32 打卡 → 17:32 下班（正常）
- 10:32 打卡 → 18:00 下班（迟到 ⚠️）
- 16:00 打卡 → 18:00 下班（异常 🔴，**不是凌晨 01:00**）

### 2. 自动提醒

- 距离下班 5/10/15 分钟推送通知
- 到达下班时间立即提醒
- 打卡成功即时反馈

### 3. 其他功能

- ✅ 提前下班模式（节假日临时解锁，次日自动重置）
- ✅ 最近 10 条打卡记录（带状态标记）
- ✅ 完全离线可用（PWA）
- ✅ 深色模式自适应

---

## 快速使用

### 在线访问

部署后添加到手机主屏幕，作为独立 App 使用。

### 本地运行

```bash
# 启动本地服务
python3 -m http.server 8000

# 浏览器访问
open http://localhost:8000
```

### 部署到 Vercel

```bash
npm i -g vercel
vercel --prod
```

### 移动端安装

**iOS Safari：**
1. 打开网页
2. 点击"分享" → "添加到主屏幕"
3. 完成，可当原生 App 使用

**Android Chrome：**
1. 打开网页
2. 点击菜单 → "安装应用"
3. 完成

**Android Chrome：**
1. 打开网页
2. 点击菜单 → "安装应用"
3. 完成

---

## 技术栈

| 层级 | 技术 |
|------|------|
| 前端 | 原生 HTML/CSS/JavaScript（单文件约 1000 行）|
| 存储 | localStorage（本地存储）|
| 离线 | Service Worker + PWA |
| 通知 | Web Notifications API |

**浏览器支持：** Chrome 90+, Safari 14+, Firefox 88+

---

## 数据说明

所有数据存储在浏览器 localStorage：

```javascript
// 每日打卡记录
{
  "2026-02-13": {
    clockIn: 1739425920000,           // 上班时间戳
    clockInStatus: {                  // 状态（normal/late/abnormal）
      type: 'late', 
      label: '迟到', 
      emoji: '⚠️'
    },
    clockOut: 1739458320000,          // 下班时间戳
    expectedOut: 1739458320000        // 预计下班时间
  }
}

// 用户设置
{
  reminderMinutes: 5,     // 提醒时间（5/10/15分钟）
  workHours: 9,           // 工作时长
  earlyLeaveDate: null    // 提前下班日期（仅当天有效）
}
```

---

## FAQ

**Q: 异常打卡为什么按 09:00 计算？**  
A: 避免下午 16:00 打卡推算到次日凌晨 01:00 的荒谬结果。

**Q: 数据会丢失吗？**  
A: localStorage 持久存储，除非清除浏览器数据。建议定期备份。

**Q: 可以修改打卡时间吗？**  
A: 不支持。有意为之的设计，避免频繁修改。如需修改可在浏览器控制台手动编辑 localStorage。

**Q: 为什么不做云同步？**  
A: 保持"本地优先、隐私优先"原则，无需注册登录。

---

## License

MIT